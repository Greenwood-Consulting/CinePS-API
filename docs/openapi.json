{
    "openapi": "3.0.0",
    "info": {
        "title": "CinePs API",
        "description": "API de l'app CinePS",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "{{url_api}}"
        }
    ],
    "paths": {
        "/api/login_check": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Authentification par login/mot de passe",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "example": "user@example.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "password"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Jeton JWT",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "token": {
                                            "type": "string",
                                            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides"
                    }
                },
                "security": []
            }
        },
        "/api/doc.json": {
            "get": {
                "tags": [
                    "Documentation"
                ],
                "summary": "R\u00e9cup\u00e8re la documentation OpenAPI JSON",
                "description": "Cet endpoint renvoie le fichier JSON OpenAPI complet de l'API.\nUtile pour importer la collection Postman ou pour des outils externes.\n",
                "responses": {
                    "200": {
                        "description": "Fichier JSON OpenAPI",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/newmembre": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Cr\u00e9er un nouveau membre",
                "operationId": "post_createMembre",
                "requestBody": {
                    "description": "Donn\u00e9es du nouveau membre",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Membre"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Membre cr\u00e9\u00e9 avec succ\u00e8s",
                        "headers": {
                            "Location": {
                                "description": "URL du membre cr\u00e9\u00e9",
                                "schema": {
                                    "type": "string",
                                    "format": "uri"
                                }
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Membre2"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/newSemaine": {
            "post": {
                "tags": [
                    "Admin"
                ],
                "summary": "Cr\u00e9er une nouvelle semaine",
                "operationId": "post_createSemaine",
                "requestBody": {
                    "description": "Donn\u00e9es de la nouvelle semaine",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "proposeur_id": {
                                        "description": "ID du proposeur",
                                        "type": "integer"
                                    },
                                    "jour": {
                                        "description": "Jour de la semaine (format Y-m-d)",
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "type_semaine": {
                                        "description": "Type de la semaine",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Semaine cr\u00e9\u00e9e avec succ\u00e8s",
                        "headers": {
                            "Location": {
                                "description": "URL de la semaine cr\u00e9\u00e9e",
                                "schema": {
                                    "type": "string",
                                    "format": "uri"
                                }
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Semaine"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/films/{id}": {
            "get": {
                "tags": [
                    "Films"
                ],
                "summary": "R\u00e9cup\u00e8re un film par son identifiant",
                "operationId": "get_film_find",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identifiant du film",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Film trouv\u00e9",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Film"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Film non trouv\u00e9"
                    }
                }
            },
            "put": {
                "tags": [
                    "Films"
                ],
                "summary": "Modifier un film existant",
                "operationId": "put_film_update",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identifiant du film \u00e0 modifier",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Donn\u00e9es du film \u00e0 modifier",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Film2"
                            }
                        }
                    }
                },
                "responses": {
                    "204": {
                        "description": "Film modifi\u00e9 avec succ\u00e8s"
                    },
                    "400": {
                        "description": "Donn\u00e9es invalides"
                    },
                    "404": {
                        "description": "Film non trouv\u00e9"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Films"
                ],
                "summary": "Supprimer un film",
                "description": "Supprime un film par son identifiant.",
                "operationId": "deleteFilm",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identifiant du film \u00e0 supprimer",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Film supprim\u00e9 ou n'existe pas"
                    },
                    "409": {
                        "description": "Impossible de supprimer un film avec des propositions ou des notes associ\u00e9es"
                    }
                }
            }
        },
        "/api/films": {
            "post": {
                "tags": [
                    "Films"
                ],
                "summary": "Cr\u00e9er un nouveau film",
                "operationId": "post_film_create",
                "requestBody": {
                    "description": "Donn\u00e9es du film \u00e0 cr\u00e9er",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateFilmInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Film cr\u00e9\u00e9 avec succ\u00e8s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Film"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation"
                    },
                    "404": {
                        "description": "Pre-Selection not found"
                    }
                }
            }
        },
        "/api/dlink": {
            "get": {
                "tags": [
                    "Global Settings"
                ],
                "summary": "Get the Dlink global setting",
                "operationId": "get_global_settings_get_dlink",
                "responses": {
                    "200": {
                        "description": "Returns the Dlink value",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "value": {
                                            "type": "string",
                                            "example": "https://example.com/dlink"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Dlink not found"
                    }
                }
            },
            "put": {
                "tags": [
                    "Global Settings"
                ],
                "summary": "Update the Dlink global setting",
                "operationId": "put_global_settings_update_dlink",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "value": {
                                        "type": "string",
                                        "example": "https://newlink.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "204": {
                        "description": "Dlink updated successfully"
                    },
                    "400": {
                        "description": "Missing \"value\" in request body"
                    },
                    "404": {
                        "description": "Dlink not found"
                    }
                }
            }
        },
        "/api/historique": {
            "get": {
                "tags": [
                    "Historique"
                ],
                "summary": "Retrieve the history of past weeks with propositions, votes, and notes",
                "description": "This endpoint provides the historical data of past weeks, including propositions, votes, and notes for each member, along with the victorious film for each week.",
                "operationId": "get_app_historique",
                "responses": {
                    "200": {
                        "description": "Successful response with historical data",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "semaines": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "jour": {
                                                        "type": "string",
                                                        "format": "date"
                                                    },
                                                    "propositions": {
                                                        "type": "array",
                                                        "items": {
                                                            "properties": {
                                                                "id": {
                                                                    "type": "integer"
                                                                },
                                                                "film": {
                                                                    "type": "object"
                                                                },
                                                                "vote": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "properties": {
                                                                            "membre": {
                                                                                "type": "string"
                                                                            },
                                                                            "vote": {
                                                                                "type": "string"
                                                                            }
                                                                        },
                                                                        "type": "object"
                                                                    }
                                                                },
                                                                "note": {
                                                                    "type": "array",
                                                                    "items": {
                                                                        "properties": {
                                                                            "membre": {
                                                                                "type": "integer"
                                                                            },
                                                                            "note": {
                                                                                "type": "string"
                                                                            }
                                                                        },
                                                                        "type": "object"
                                                                    }
                                                                }
                                                            },
                                                            "type": "object"
                                                        }
                                                    },
                                                    "film_victorieux": {
                                                        "type": "object"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "membres": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer"
                                                    },
                                                    "Prenom": {
                                                        "type": "string"
                                                    },
                                                    "Nom": {
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found"
                    }
                }
            }
        },
        "/api/membres": {
            "get": {
                "tags": [
                    "Membre"
                ],
                "summary": "Retrieve all membres",
                "description": "Fetches a list of all membres",
                "operationId": "get_app_membre",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Membre3"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Membre not found"
                    },
                    "400": {
                        "description": "Bad request"
                    }
                }
            }
        },
        "/api/membres/{id}": {
            "get": {
                "tags": [
                    "Membre"
                ],
                "summary": "Retrieve membre details",
                "description": "Fetches details of a specific membre by ID",
                "operationId": "get_detailMembre",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "The ID of the membre",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Membre details retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Membre3"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Membre not found"
                    }
                }
            }
        },
        "/api/actifMembre/{id_membre}": {
            "patch": {
                "tags": [
                    "Membre"
                ],
                "summary": "Update membre activation status",
                "description": "Modify the activation status of a membre by ID",
                "operationId": "patch_actifMembre",
                "parameters": [
                    {
                        "name": "id_membre",
                        "in": "path",
                        "description": "The ID of the membre",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Update membre activation status",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "actif": {
                                        "description": "Activation status",
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Membre activation status updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Membre3"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Membre not found"
                    },
                    "400": {
                        "description": "Bad request"
                    }
                }
            }
        },
        "/api/note": {
            "post": {
                "tags": [
                    "Note"
                ],
                "summary": "Cr\u00e9er une nouvelle note",
                "description": "Permet de cr\u00e9er une nouvelle note pour un film par un membre. Si aucune note n'est fournie, cela correspond \u00e0 une abstention.",
                "operationId": "post_createNote",
                "requestBody": {
                    "description": "Donn\u00e9es n\u00e9cessaires pour cr\u00e9er une note",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "membre_id": {
                                        "description": "ID du membre notateur",
                                        "type": "integer"
                                    },
                                    "film_id": {
                                        "description": "ID du film \u00e0 noter",
                                        "type": "integer"
                                    },
                                    "note": {
                                        "description": "Note attribu\u00e9e au film (optionnelle)",
                                        "type": "integer",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Note cr\u00e9\u00e9e avec succ\u00e8s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Note"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Requ\u00eate invalide"
                    },
                    "404": {
                        "description": "Membre ou film introuvable"
                    }
                }
            }
        },
        "/api/preselections/{id}": {
            "get": {
                "tags": [
                    "PreSelections"
                ],
                "summary": "R\u00e9cup\u00e8re une pr\u00e9-s\u00e9lection",
                "operationId": "get_preselections_find",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identifiant de la pr\u00e9-s\u00e9lection",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pr\u00e9-s\u00e9lection trouv\u00e9e",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/PreSelection"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Pr\u00e9-s\u00e9lection non trouv\u00e9e"
                    }
                }
            },
            "delete": {
                "tags": [
                    "PreSelections"
                ],
                "summary": "Supprime une pr\u00e9s\u00e9lection",
                "operationId": "delete_preselections_delete",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identifiant de la pr\u00e9s\u00e9lection \u00e0 supprimer",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Suppression r\u00e9ussie ou d\u00e9j\u00e0 inexistante (idempotent)"
                    },
                    "404": {
                        "description": "Pr\u00e9s\u00e9lection introuvable (si type-hinting ou param converter \u00e9choue)"
                    }
                }
            }
        },
        "/api/preselections/membres/{id}": {
            "get": {
                "tags": [
                    "PreSelections"
                ],
                "summary": "Liste les pr\u00e9-s\u00e9lections associ\u00e9es \u00e0 un membre",
                "operationId": "get_preselections_list",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "Identifiant du membre",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des pr\u00e9-s\u00e9lections trouv\u00e9es",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/PreSelection"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Membre non trouv\u00e9"
                    }
                }
            }
        },
        "/api/preselections": {
            "post": {
                "tags": [
                    "PreSelections"
                ],
                "summary": "Cr\u00e9er une pr\u00e9s\u00e9lection",
                "operationId": "post_preselections_create",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/PreSelectionInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Pr\u00e9s\u00e9lection cr\u00e9\u00e9e",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/PreSelection"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Requ\u00eate invalide"
                    },
                    "404": {
                        "description": "Membre introuvable"
                    },
                    "422": {
                        "description": "Erreurs de validation"
                    }
                }
            }
        },
        "/api/filmsGagnants": {
            "get": {
                "tags": [
                    "Profil"
                ],
                "summary": "Retrieve all winning films from past weeks",
                "operationId": "get_filmsGagants",
                "responses": {
                    "200": {
                        "description": "List of winning films",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Film"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/proposition": {
            "post": {
                "tags": [
                    "Proposition"
                ],
                "summary": "Cr\u00e9er une nouvelle proposition et le film associ\u00e9",
                "operationId": "post_createProposition",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "titre_film": {
                                        "description": "Titre du film",
                                        "type": "string"
                                    },
                                    "sortie_film": {
                                        "description": "Ann\u00e9e de sortie du film",
                                        "type": "string"
                                    },
                                    "imdb_film": {
                                        "description": "Lien IMDb du film",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Proposition cr\u00e9\u00e9e avec succ\u00e8s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/proposition/{proposition_id}": {
            "delete": {
                "tags": [
                    "Proposition"
                ],
                "summary": "Supprime une proposition",
                "description": "Supprime une proposition existante \u00e0 partir de son ID",
                "operationId": "delete_deleteProposition",
                "parameters": [
                    {
                        "name": "proposition_id",
                        "in": "path",
                        "description": "ID de la proposition \u00e0 supprimer",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "204": {
                        "description": "Suppression r\u00e9ussie, aucun contenu retourn\u00e9"
                    },
                    "404": {
                        "description": "Proposition non trouv\u00e9e",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "error": {
                                            "type": "string",
                                            "example": "Proposition not found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/secondeChance/{proposeur_id}": {
            "post": {
                "tags": [
                    "Proposition"
                ],
                "summary": "R\u00e9cup\u00e9rer les propositions perdantes pour un proposeur donn\u00e9",
                "operationId": "post_seconde_chance",
                "parameters": [
                    {
                        "name": "proposeur_id",
                        "in": "path",
                        "description": "ID du proposeur",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Liste des propositions perdantes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Proposition"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/propositionOpenAI": {
            "post": {
                "tags": [
                    "Proposition"
                ],
                "summary": "Cr\u00e9er des propositions de films bas\u00e9es sur un th\u00e8me en utilisant OpenAI",
                "operationId": "post_createPropositionApi",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "theme": {
                                        "description": "Th\u00e8me pour g\u00e9n\u00e9rer des propositions de films",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Films et propositions enregistr\u00e9s avec succ\u00e8s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Les films et propositions ont \u00e9t\u00e9 enregistr\u00e9s en base de donn\u00e9es"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/currentSemaine": {
            "get": {
                "tags": [
                    "Semaine"
                ],
                "summary": "Get the current week data",
                "description": "Returns the data of the current week based on the current date.",
                "operationId": "get_currentSemaine",
                "responses": {
                    "200": {
                        "description": "Successful response with current week data",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Semaine"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "error": {
                                            "type": "string",
                                            "example": "Not Found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/nextProposeurs/{id_semaine}": {
            "get": {
                "tags": [
                    "Semaine"
                ],
                "summary": "Get the list of proposers for upcoming weeks",
                "description": "Returns the list of proposers for the weeks following the given week ID.",
                "operationId": "get_nextProposeurs",
                "parameters": [
                    {
                        "name": "id_semaine",
                        "in": "path",
                        "description": "The ID of the current week to fetch proposers for subsequent weeks",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response with the list of proposers",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Semaine"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "error": {
                                            "type": "string",
                                            "example": "Not Found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/votes/{id_semaine}": {
            "get": {
                "tags": [
                    "Semaine"
                ],
                "summary": "Get votes and ratings for a specific week",
                "description": "Returns the votes and ratings for all propositions of a specific week.",
                "operationId": "get_votes",
                "parameters": [
                    {
                        "name": "id_semaine",
                        "in": "path",
                        "description": "The ID of the week to fetch votes and ratings for",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response with votes and ratings",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Semaine"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "error": {
                                            "type": "string",
                                            "example": "Not Found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/semaine/{id_semaine}": {
            "patch": {
                "tags": [
                    "Semaine"
                ],
                "summary": "Update a specific week",
                "description": "Updates the details of a specific week, including propositions, theme, winning proposition, and other attributes.",
                "operationId": "patch_updateSemaine",
                "parameters": [
                    {
                        "name": "id_semaine",
                        "in": "path",
                        "description": "The ID of the week to update",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Data to update the week",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "proposition_terminee": {
                                        "description": "Indicates if the propositions are finished",
                                        "type": "boolean"
                                    },
                                    "theme": {
                                        "description": "The theme of the week",
                                        "type": "string"
                                    },
                                    "proposition_gagnante": {
                                        "description": "ID of the winning proposition",
                                        "type": "integer"
                                    },
                                    "proposeur_id": {
                                        "description": "ID of the proposer",
                                        "type": "integer"
                                    },
                                    "raison_changement_film": {
                                        "description": "Reason for changing the film",
                                        "type": "string"
                                    },
                                    "type_semaine": {
                                        "description": "Type of the week (e.g., PSDroitDivin)",
                                        "type": "string"
                                    },
                                    "droit_divin_titre_film": {
                                        "description": "Title of the film for PSDroitDivin",
                                        "type": "string"
                                    },
                                    "droit_divin_date_film": {
                                        "description": "Release date of the film for PSDroitDivin",
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "droit_divin_lien_imdb": {
                                        "description": "IMDB link of the film for PSDroitDivin",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful response with updated week data",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Semaine"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "error": {
                                            "type": "string",
                                            "example": "Not Found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/getNbPropositionsParProposeur": {
            "get": {
                "tags": [
                    "Statistics"
                ],
                "summary": "Get the number of propositions per proposer",
                "description": "Retrieve the count of propositions grouped by proposer, excluding specific types.",
                "operationId": "get_app_get_nbproposeur",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "proposeur": {
                                                "description": "Name of the proposer",
                                                "type": "string"
                                            },
                                            "nb_semaines": {
                                                "description": "Number of weeks",
                                                "type": "integer"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/usersSatisfaction": {
            "get": {
                "tags": [
                    "Statistics"
                ],
                "summary": "Get user satisfaction data",
                "description": "Retrieve satisfaction votes for all users, sorted by satisfaction level.",
                "operationId": "get_app_users_satisfaction",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "user": {
                                                "description": "User details",
                                                "type": "object"
                                            },
                                            "satisfactionVote": {
                                                "description": "Satisfaction vote of the user",
                                                "type": "integer"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/usersNotesMoyennes": {
            "get": {
                "tags": [
                    "Statistics"
                ],
                "summary": "Get average notes per user",
                "description": "Retrieve the average notes given by users, including the number of notes, sorted by average note.",
                "operationId": "get_app_users_notes_moyennes",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "user": {
                                                "description": "User details",
                                                "type": "object"
                                            },
                                            "noteMoyenne": {
                                                "description": "Average note of the user",
                                                "type": "number",
                                                "format": "float"
                                            },
                                            "nbNotes": {
                                                "description": "Number of notes given by the user",
                                                "type": "integer"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/filmVictorieux/{id_semaine}": {
            "get": {
                "tags": [
                    "Vote"
                ],
                "summary": "Retrieve the victorious film(s) for a given week",
                "description": "Returns the film(s) with the highest votes for the specified week. Multiple films can be returned in case of a tie.",
                "operationId": "get_FilmVictorieux",
                "parameters": [
                    {
                        "name": "id_semaine",
                        "in": "path",
                        "description": "The ID of the week to retrieve the victorious film(s) for",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response with the victorious film(s)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Proposition"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Week not found"
                    }
                }
            }
        },
        "/api/avote/{id_membre}": {
            "post": {
                "tags": [
                    "Vote"
                ],
                "summary": "Register a new entry in the AVote table",
                "description": "Creates a new AVote entry for the specified member and the current week.",
                "operationId": "post_aVote",
                "parameters": [
                    {
                        "name": "id_membre",
                        "in": "path",
                        "description": "The ID of the member registering the vote",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "AVote entry successfully created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/AVote"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Member not found"
                    }
                }
            }
        },
        "/api/saveVoteProposition": {
            "post": {
                "tags": [
                    "Vote"
                ],
                "summary": "Save a vote and update the score of a proposition",
                "description": "Registers a vote for a proposition, updates the proposition's score, and creates a new Vote entry.",
                "operationId": "post_saveVoteProposition",
                "requestBody": {
                    "description": "JSON payload containing the member ID, proposition ID, and vote value",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "membre": {
                                        "description": "The ID of the member voting",
                                        "type": "integer"
                                    },
                                    "proposition": {
                                        "description": "The ID of the proposition being voted on",
                                        "type": "integer"
                                    },
                                    "vote": {
                                        "description": "The value of the vote (positive or negative)",
                                        "type": "integer"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Vote successfully registered",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Vote"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Member or proposition not found"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Membre": {
                "required": [
                    "nom",
                    "prenom"
                ],
                "properties": {
                    "nom": {
                        "type": "string"
                    },
                    "prenom": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Membre2": {
                "type": "object"
            },
            "Semaine": {
                "required": [
                    "id",
                    "jour",
                    "theme",
                    "propositions",
                    "proposeur",
                    "votants",
                    "type",
                    "is_vote_termine"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "jour": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "theme": {
                        "type": "string"
                    },
                    "propositions": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Proposition"
                        }
                    },
                    "proposeur": {
                        "$ref": "#/components/schemas/Membre4"
                    },
                    "votants": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AVote2"
                        }
                    },
                    "type": {
                        "type": "string"
                    },
                    "filmVu": {
                        "nullable": true,
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/Film3"
                            }
                        ]
                    },
                    "is_vote_termine": {
                        "type": "boolean"
                    }
                },
                "type": "object"
            },
            "Film": {
                "required": [
                    "id",
                    "titre",
                    "date",
                    "sortie_film",
                    "imdb"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "titre": {
                        "type": "string",
                        "maxLength": 255,
                        "minLength": 1
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "sortie_film": {
                        "type": "integer"
                    },
                    "imdb": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Film2": {
                "required": [
                    "titre",
                    "date",
                    "sortie_film",
                    "imdb"
                ],
                "properties": {
                    "titre": {
                        "type": "string",
                        "maxLength": 255,
                        "minLength": 1
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "sortie_film": {
                        "type": "integer"
                    },
                    "imdb": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "CreateFilmInput": {
                "required": [
                    "titre",
                    "date",
                    "sortie_film",
                    "imdb"
                ],
                "properties": {
                    "titre": {
                        "type": "string"
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "sortie_film": {
                        "type": "integer"
                    },
                    "imdb": {
                        "type": "string"
                    },
                    "pre_selection_id": {
                        "type": "integer",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "Membre3": {
                "required": [
                    "id",
                    "nom",
                    "prenom",
                    "mail",
                    "mdp",
                    "actif"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "nom": {
                        "type": "string"
                    },
                    "prenom": {
                        "type": "string"
                    },
                    "mail": {
                        "type": "string"
                    },
                    "mdp": {
                        "type": "string"
                    },
                    "actif": {
                        "type": "boolean"
                    }
                },
                "type": "object"
            },
            "Note": {
                "type": "object"
            },
            "PreSelection": {
                "required": [
                    "id",
                    "films",
                    "membre",
                    "theme"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "films": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Film4"
                        }
                    },
                    "membre": {
                        "$ref": "#/components/schemas/Membre5"
                    },
                    "theme": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "PreSelectionInput": {
                "required": [
                    "membre_id",
                    "theme"
                ],
                "properties": {
                    "membre_id": {
                        "type": "integer"
                    },
                    "theme": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Proposition": {
                "required": [
                    "id",
                    "film",
                    "score"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "film": {
                        "$ref": "#/components/schemas/Film3"
                    },
                    "score": {
                        "type": "integer"
                    }
                },
                "type": "object"
            },
            "AVote": {
                "required": [
                    "id",
                    "votant",
                    "semaine"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "votant": {
                        "$ref": "#/components/schemas/Membre3"
                    },
                    "semaine": {
                        "$ref": "#/components/schemas/Semaine2"
                    }
                },
                "type": "object"
            },
            "Vote": {
                "required": [
                    "id",
                    "semaine",
                    "membre",
                    "proposition",
                    "vote"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "semaine": {
                        "$ref": "#/components/schemas/Semaine2"
                    },
                    "membre": {
                        "$ref": "#/components/schemas/Membre3"
                    },
                    "proposition": {
                        "$ref": "#/components/schemas/Proposition2"
                    },
                    "vote": {
                        "type": "integer"
                    }
                },
                "type": "object"
            },
            "Membre4": {
                "required": [
                    "id",
                    "nom",
                    "prenom"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "nom": {
                        "type": "string"
                    },
                    "prenom": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "AVote2": {
                "required": [
                    "votant"
                ],
                "properties": {
                    "votant": {
                        "$ref": "#/components/schemas/Membre4"
                    }
                },
                "type": "object"
            },
            "Film3": {
                "required": [
                    "id",
                    "titre",
                    "date",
                    "sortie_film",
                    "imdb"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "titre": {
                        "type": "string",
                        "maxLength": 255,
                        "minLength": 1
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "sortie_film": {
                        "type": "integer"
                    },
                    "imdb": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Film4": {
                "required": [
                    "id",
                    "titre",
                    "date",
                    "sortie_film",
                    "imdb"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "titre": {
                        "type": "string",
                        "maxLength": 255,
                        "minLength": 1
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "sortie_film": {
                        "type": "integer"
                    },
                    "imdb": {
                        "type": "string"
                    }
                },
                "type": "object"
            },
            "Membre5": {
                "required": [
                    "id"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    }
                },
                "type": "object"
            },
            "Semaine2": {
                "required": [
                    "id",
                    "jour",
                    "theme",
                    "propositions",
                    "proposeur",
                    "votants",
                    "type",
                    "is_vote_termine",
                    "propositionTermine",
                    "voteTermine"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "jour": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "theme": {
                        "type": "string"
                    },
                    "propositions": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Proposition2"
                        }
                    },
                    "proposeur": {
                        "$ref": "#/components/schemas/Membre3"
                    },
                    "votants": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AVote"
                        }
                    },
                    "type": {
                        "type": "string"
                    },
                    "filmVu": {
                        "nullable": true,
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/Film5"
                            }
                        ]
                    },
                    "is_vote_termine": {
                        "type": "boolean"
                    },
                    "propositionTermine": {
                        "type": "boolean"
                    },
                    "raisonPropositionChoisie": {
                        "type": "string",
                        "nullable": true
                    },
                    "voteTermine": {
                        "type": "boolean"
                    }
                },
                "type": "object"
            },
            "Proposition2": {
                "required": [
                    "id",
                    "film",
                    "score",
                    "semaine"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "film": {
                        "$ref": "#/components/schemas/Film5"
                    },
                    "score": {
                        "type": "integer"
                    },
                    "semaine": {
                        "$ref": "#/components/schemas/Semaine2"
                    }
                },
                "type": "object"
            },
            "Film5": {
                "required": [
                    "id",
                    "titre",
                    "date",
                    "sortie_film",
                    "imdb",
                    "propositions",
                    "notes",
                    "preSelections"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "titre": {
                        "type": "string",
                        "maxLength": 255,
                        "minLength": 1
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "sortie_film": {
                        "type": "integer"
                    },
                    "imdb": {
                        "type": "string"
                    },
                    "propositions": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Proposition2"
                        }
                    },
                    "notes": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Note2"
                        }
                    },
                    "moyenne": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "ecartType": {
                        "type": "number",
                        "format": "float",
                        "nullable": true
                    },
                    "preSelections": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PreSelection2"
                        }
                    }
                },
                "type": "object"
            },
            "Note2": {
                "required": [
                    "id"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "note": {
                        "type": "integer",
                        "nullable": true
                    },
                    "film": {
                        "nullable": true,
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/Film5"
                            }
                        ]
                    },
                    "membre": {
                        "nullable": true,
                        "oneOf": [
                            {
                                "$ref": "#/components/schemas/Membre3"
                            }
                        ]
                    }
                },
                "type": "object"
            },
            "PreSelection2": {
                "required": [
                    "id",
                    "films",
                    "membre",
                    "theme"
                ],
                "properties": {
                    "id": {
                        "type": "integer"
                    },
                    "films": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Film5"
                        }
                    },
                    "membre": {
                        "$ref": "#/components/schemas/Membre3"
                    },
                    "theme": {
                        "type": "string"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "BearerAuth": {
                "type": "http",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "security": [
        {
            "BearerAuth": []
        }
    ],
    "tags": [
        {
            "name": "Admin"
        },
        {
            "name": "Films"
        },
        {
            "name": "Global Settings"
        },
        {
            "name": "Historique"
        },
        {
            "name": "Membre"
        },
        {
            "name": "Note"
        },
        {
            "name": "PreSelections"
        },
        {
            "name": "Profil"
        },
        {
            "name": "Proposition"
        },
        {
            "name": "Semaine"
        },
        {
            "name": "Statistics"
        },
        {
            "name": "Vote"
        },
        {
            "name": "Authentication",
            "description": "Authentication"
        },
        {
            "name": "Documentation",
            "description": "Documentation"
        }
    ]
}
